

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Commuting from Allston - Dzakwan Falih</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Dzakwan Falih">
<meta property="og:title" content="Commuting from Allston">


  <link rel="canonical" href="http://localhost:4000/posts/2018/09/commute">
  <meta property="og:url" content="http://localhost:4000/posts/2018/09/commute">



  <meta property="og:description" content="About a year ago, I moved from my lovely Beacon Hill apartment (300 yards from the subway) to a house full of my friends (a 20-25 minute walk from the nearest subway stop). I’m super happy in my new house (we have chickens!) and it was totally the right decision, but at the time my new commute felt daunting - and many of my friends told me I’d regret giving up the convenience of my amazing Beacon Hill location. So, I did what any aspiring data scientist would do and started gathering data to prove them wrong. (See a theme in my data collection posts yet? XD)">



  <meta name="twitter:site" content="@dzakwanfalihh">
  <meta name="twitter:title" content="Commuting from Allston">
  <meta name="twitter:description" content="About a year ago, I moved from my lovely Beacon Hill apartment (300 yards from the subway) to a house full of my friends (a 20-25 minute walk from the nearest subway stop). I’m super happy in my new house (we have chickens!) and it was totally the right decision, but at the time my new commute felt daunting - and many of my friends told me I’d regret giving up the convenience of my amazing Beacon Hill location. So, I did what any aspiring data scientist would do and started gathering data to prove them wrong. (See a theme in my data collection posts yet? XD)">
  <meta name="twitter:url" content="http://localhost:4000/posts/2018/09/commute">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2018-09-03T00:00:00-07:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Dzakwan Falih",
      "url" : "http://localhost:4000",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Dzakwan Falih Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="http://localhost:4000/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="http://localhost:4000/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="http://localhost:4000/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="http://localhost:4000/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="http://localhost:4000/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="http://localhost:4000/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="http://localhost:4000/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="http://localhost:4000/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="http://localhost:4000/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="http://localhost:4000/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="http://localhost:4000/assets/css/academicons.css"/>
<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/">Dzakwan Falih</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/blog/">Blog</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/publications/">Publications</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/cv/">CV</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/travel/">Road trip</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="http://localhost:4000/images/gue.jpeg" class="author__avatar" alt="Dzakwan Falih">
    
  </div>

  <div class="author__content">
    <h3 class="author__name"><a href="/">Dzakwan Falih</a></h3>
    <p class="author__bio">reformed cyber criminal @ cyber space</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Cyber Space, Internet</li>
      
      
      
      
        <li><a href="https://keybase.io/dzakwanfalih"><i class="fa fa-fw fa-key" aria-hidden="true"></i> Keybase</a></li>
      
      
        <li><a href="https://twitter.com/dzakwanfalihh"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/dzakwanfalih"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
        <li><a href="https://instagram.com/dzakwanfalih_2.0"><i class="fa fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
        <li><a href="https://scholar.google.com/citations?hl=en&user=ZFuwjiIAAAAJ"><i class="ai ai-google-scholar-square ai-fw"></i> Google Scholar</a></li>
      
      
      
      
      
        <li><a href="mailto:dzakwanfaliht@hotmail.com"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
      

    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Commuting from Allston">
    <meta itemprop="description" content="About a year ago, I moved from my lovely Beacon Hill apartment (300 yards from the subway) to a house full of my friends (a 20-25 minute walk from the nearest subway stop). I’m super happy in my new house (we have chickens!) and it was totally the right decision, but at the time my new commute felt daunting - and many of my friends told me I’d regret giving up the convenience of my amazing Beacon Hill location. So, I did what any aspiring data scientist would do and started gathering data to prove them wrong. (See a theme in my data collection posts yet? XD)">
    <meta itemprop="datePublished" content="September 03, 2018">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Commuting from Allston
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  20 minute read
	
</p>
          
        
        
        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2018-09-03T00:00:00-07:00">September 03, 2018</time></p>
        
        
             
        
    
        </header>
      

      <section class="page__content" itemprop="text">
        <p>About a year ago, I moved from my lovely Beacon Hill apartment (300 yards from the subway) to a house full of my friends (a 20-25 minute walk from the nearest subway stop). I’m super happy in my new house (we have chickens!) and it was totally the right decision, but at the time my new commute felt daunting - and many of my friends told me I’d regret giving up the convenience of my amazing Beacon Hill location. So, I did what any aspiring data scientist would do and started gathering data to prove them wrong. (See a theme in my <a href="/posts/2018/06/hinge-experiment">data collection</a> posts yet? XD)</p>

<p>Apart from proving my friends that “the commute isn’t that bad, and plus the MBTA is awesome”, I had a few other questions I wanted to answer:</p>

<ul>
  <li>what’s the fastest way to get to work? bike, car, or bus?</li>
  <li>how often is the bus delayed from what I expect, and by how much?</li>
  <li>which bus is more reliable: the 70 (which is a 10-minute walk from my house), or the 64 (which is 2 minutes away)?</li>
</ul>

<h1 id="data-collection">Data collection</h1>

<p>I set up a google spreadsheet to track my commute. For every trip to or from work, I tried to track:</p>

<ul>
  <li>the time I left my house or office</li>
  <li>the time I got on the bus, and which bus it was</li>
  <li>the time I got off the bus</li>
  <li>the time I got to work or my house</li>
  <li>the time my most reliable app, OpenMBTA, said the bus would be there</li>
</ul>

<p>I also kept track of my departure and arrival times on days when I walked or got a ride from my roommate.</p>

<p>Here’s what the data looks like, after some cleaning up:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="k">as</span> <span class="n">sp</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s">'white'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fname</span> <span class="o">=</span> <span class="s">'Commute - Sheet1.tsv'</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">'</span><span class="se">\t</span><span class="s">'</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s">'Unnamed: 10'</span><span class="p">:</span> <span class="s">'comments'</span><span class="p">})</span>
<span class="c1"># Replace the automatically-generated duration with NaN
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'0:00:00'</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s">'all'</span><span class="p">)</span>

<span class="c1"># Remove the one entry where I went to central
</span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'going_to != "central"'</span><span class="p">)</span>

<span class="c1"># Convert time columns to datetime
</span><span class="n">cols_datetime</span> <span class="o">=</span> <span class="p">[</span><span class="s">'leave'</span><span class="p">,</span> <span class="s">'bus_time'</span><span class="p">,</span> <span class="s">'leave_bus'</span><span class="p">,</span> <span class="s">'arrive'</span><span class="p">,</span> <span class="s">'open_mbta_said'</span><span class="p">]</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">cols_datetime</span><span class="p">:</span>
    <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">])</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>going_to</th>
      <th>method</th>
      <th>leave</th>
      <th>bus_time</th>
      <th>bus_number</th>
      <th>leave_bus</th>
      <th>arrive</th>
      <th>duration</th>
      <th>open_mbta_said</th>
      <th>comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7/5/2017</td>
      <td>work</td>
      <td>bus</td>
      <td>2018-09-03 10:40:00</td>
      <td>2018-09-03 10:43:00</td>
      <td>64.0</td>
      <td>2018-09-03 10:52:00</td>
      <td>2018-09-03 11:00:00</td>
      <td>0:20:00</td>
      <td>NaT</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7/5/2017</td>
      <td>home</td>
      <td>bus</td>
      <td>2018-09-03 22:00:00</td>
      <td>2018-09-03 22:10:00</td>
      <td>64.0</td>
      <td>2018-09-03 22:18:00</td>
      <td>2018-09-03 22:20:00</td>
      <td>0:20:00</td>
      <td>NaT</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7/7/2017</td>
      <td>home</td>
      <td>bus</td>
      <td>2018-09-03 19:55:00</td>
      <td>2018-09-03 20:10:00</td>
      <td>70.0</td>
      <td>2018-09-03 20:22:00</td>
      <td>2018-09-03 20:29:00</td>
      <td>0:34:00</td>
      <td>NaT</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7/8/2017</td>
      <td>work</td>
      <td>bus</td>
      <td>2018-09-03 07:54:00</td>
      <td>2018-09-03 08:03:00</td>
      <td>64.0</td>
      <td>NaT</td>
      <td>NaT</td>
      <td>-7:54:00</td>
      <td>2018-09-03 08:07:00</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7/10/2017</td>
      <td>work</td>
      <td>car</td>
      <td>2018-09-03 08:31:00</td>
      <td>NaT</td>
      <td>NaN</td>
      <td>NaT</td>
      <td>2018-09-03 08:47:00</td>
      <td>0:16:00</td>
      <td>NaT</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<p>A note that I’ll mostly be focusing on my commute <em>to</em> work for many of these analyses, since I gathered much less data for my commute home. It turns out that I actually pretty rarely go straight home from work, and I didn’t really want to deal with tracking those complexities. Also, on the days when I do go straight home, I often forgot to log my commute.</p>

<h1 id="commute-duration">Commute duration</h1>

<p>First, I can ask the most basic question: how long does it take me to get to and from work, and how does that vary with the method of transportation I take?</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Convert the "duration" column into minutes
</span><span class="n">df</span><span class="p">[</span><span class="s">'clean_duration'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'duration'</span><span class="p">]</span><span class="o">.</span><span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">':'</span><span class="p">)</span><span class="o">.</span><span class="nb">str</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

<span class="c1"># Remove any negative durations (these are days when I forgot to write my arrival)
</span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">'duration'</span><span class="p">]</span><span class="o">.</span><span class="nb">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'-'</span><span class="p">),</span> <span class="s">'clean_duration'</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="n">df</span><span class="p">[[</span><span class="s">'duration'</span><span class="p">,</span> <span class="s">'clean_duration'</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>duration</th>
      <th>clean_duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0:20:00</td>
      <td>20.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0:20:00</td>
      <td>20.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0:34:00</td>
      <td>34.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-7:54:00</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0:16:00</td>
      <td>16.0</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">g</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">FacetGrid</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s">'going_to'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="nb">map</span><span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">,</span> <span class="s">'method'</span><span class="p">,</span> <span class="s">'clean_duration'</span><span class="p">,</span>
      <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s">'bus'</span><span class="p">,</span> <span class="s">'bike'</span><span class="p">,</span> <span class="s">'car'</span><span class="p">],</span>
      <span class="n">fliersize</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="nb">map</span><span class="p">(</span><span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">,</span> <span class="s">'method'</span><span class="p">,</span> <span class="s">'clean_duration'</span><span class="p">,</span>
      <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s">'bus'</span><span class="p">,</span> <span class="s">'bike'</span><span class="p">,</span> <span class="s">'car'</span><span class="p">],</span>
      <span class="n">jitter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/images/2018-07-25.commute_analysis_files/2018-07-25.commute_analysis_5_1.png" alt="png" /></p>

<p>Let’s also print some of these stats, using pandas’ handy <code class="language-plaintext highlighter-rouge">describe</code> function on groupby objects.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'going_to != "central"'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">'going_to'</span><span class="p">,</span> <span class="s">'method'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">describe</span><span class="p">()</span>
    <span class="p">[</span><span class="s">'clean_duration'</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
    <tr>
      <th>going_to</th>
      <th>method</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="2" valign="top">home</th>
      <th>bike</th>
      <td>15.0</td>
      <td>16.266667</td>
      <td>1.279881</td>
      <td>14.0</td>
      <td>15.5</td>
      <td>16.0</td>
      <td>17.0</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>bus</th>
      <td>16.0</td>
      <td>31.937500</td>
      <td>9.629598</td>
      <td>20.0</td>
      <td>26.0</td>
      <td>30.5</td>
      <td>36.0</td>
      <td>56.0</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">work</th>
      <th>bike</th>
      <td>40.0</td>
      <td>17.650000</td>
      <td>1.928863</td>
      <td>14.0</td>
      <td>16.0</td>
      <td>17.5</td>
      <td>19.0</td>
      <td>23.0</td>
    </tr>
    <tr>
      <th>bus</th>
      <td>101.0</td>
      <td>28.455446</td>
      <td>6.284146</td>
      <td>18.0</td>
      <td>24.0</td>
      <td>27.0</td>
      <td>31.0</td>
      <td>54.0</td>
    </tr>
    <tr>
      <th>car</th>
      <td>11.0</td>
      <td>23.454545</td>
      <td>6.088738</td>
      <td>16.0</td>
      <td>19.0</td>
      <td>22.0</td>
      <td>26.5</td>
      <td>36.0</td>
    </tr>
  </tbody>
</table>
</div>

<p>From regularly logging these data everyday, I already knew that (1) biking is the fastest and most reliable way to get to work and that (2) the bus took slightly longer than biking but wasn’t that much different than driving. I knew in my heart that taking the bus was significantly longer than biking, but these boxplots are striking to me - looks like the median bus commute is 1.5-2 times longer than biking’s! I don’t need to do a statistical test to know these are different but hey, why not:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sp</span><span class="o">.</span><span class="n">ttest_ind</span><span class="p">(</span>
    <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'going_to == "work"'</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'method == "bus"'</span><span class="p">)[</span><span class="s">'clean_duration'</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span>
    <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'going_to == "work"'</span><span class="p">)</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'method == "bike"'</span><span class="p">)[</span><span class="s">'clean_duration'</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">())</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Ttest_indResult(statistic=10.657353135670544, pvalue=9.38443701751215e-20)
</code></pre></div></div>

<p>But, this is still good to know that, in general, getting to work takes around 30 minutes with the bus (door to door) and a little under 20 minutes by bike.</p>

<p>I’m pretty surprised to see so many very long commutes to work: I can only recall a couple of bad days. I wonder if I made any notes for these… Let’s grab these from the dataframe and view them directly.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">long_commute</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'going_to == "work"'</span><span class="p">)</span>
      <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'method == "bus"'</span><span class="p">)</span>
      <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'clean_duration &gt; 40'</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">long_commute</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date</th>
      <th>going_to</th>
      <th>method</th>
      <th>leave</th>
      <th>bus_time</th>
      <th>bus_number</th>
      <th>leave_bus</th>
      <th>arrive</th>
      <th>duration</th>
      <th>open_mbta_said</th>
      <th>comments</th>
      <th>clean_duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>14</th>
      <td>7/25/2017</td>
      <td>work</td>
      <td>bus</td>
      <td>2018-09-03 08:24:00</td>
      <td>2018-09-03 08:36:00</td>
      <td>64.0</td>
      <td>2018-09-03 09:03:00</td>
      <td>2018-09-03 09:06:00</td>
      <td>0:42:00</td>
      <td>2018-09-03 08:29:00</td>
      <td>NaN</td>
      <td>42.0</td>
    </tr>
    <tr>
      <th>63</th>
      <td>9/20/2017</td>
      <td>work</td>
      <td>bus</td>
      <td>2018-09-03 08:33:00</td>
      <td>2018-09-03 08:57:00</td>
      <td>64.0</td>
      <td>2018-09-03 09:24:00</td>
      <td>2018-09-03 09:27:00</td>
      <td>0:54:00</td>
      <td>2018-09-03 08:39:00</td>
      <td>rainy</td>
      <td>54.0</td>
    </tr>
    <tr>
      <th>66</th>
      <td>9/26/2017</td>
      <td>work</td>
      <td>bus</td>
      <td>2018-09-03 08:40:00</td>
      <td>2018-09-03 08:57:00</td>
      <td>64.0</td>
      <td>2018-09-03 09:22:00</td>
      <td>2018-09-03 09:26:00</td>
      <td>0:46:00</td>
      <td>2018-09-03 08:44:00</td>
      <td>NaN</td>
      <td>46.0</td>
    </tr>
    <tr>
      <th>140</th>
      <td>2/14/2018</td>
      <td>work</td>
      <td>bus</td>
      <td>2018-09-03 08:24:00</td>
      <td>2018-09-03 08:34:00</td>
      <td>64.0</td>
      <td>2018-09-03 09:09:00</td>
      <td>2018-09-03 09:12:00</td>
      <td>0:48:00</td>
      <td>2018-09-03 08:27:00</td>
      <td>NaN</td>
      <td>48.0</td>
    </tr>
  </tbody>
</table>
</div>

<p>Okay, so there are 4 days where it took me more than 40 minutes to get to work. I wonder if this was because the bus was late (i.e. I waited a long time at the bus stop) or because there was bad traffic (i.e. I spent a long time on the bus).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Did I wait a very long time at the bus stop, or spend a long time in traffic?
</span><span class="k">print</span><span class="p">(</span><span class="s">'Time at bus stop'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">long_commute</span><span class="p">[</span><span class="s">'bus_time'</span><span class="p">]</span> <span class="o">-</span> <span class="n">long_commute</span><span class="p">[</span><span class="s">'leave'</span><span class="p">])</span>

<span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">Time on the bus'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">long_commute</span><span class="p">[</span><span class="s">'leave_bus'</span><span class="p">]</span> <span class="o">-</span> <span class="n">long_commute</span><span class="p">[</span><span class="s">'bus_time'</span><span class="p">])</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Time at bus stop
14    00:12:00
63    00:24:00
66    00:17:00
140   00:10:00
dtype: timedelta64[ns]

Time on the bus
14    00:27:00
63    00:27:00
66    00:25:00
140   00:35:00
dtype: timedelta64[ns]
</code></pre></div></div>

<p>Okay, so I waited over 20 minutes for the bus on one of the trips, but otherwise the wait time was between 10 and 20 minutes. Seems that all four trips, however, took more than 20 minutes - this seems slightly high to me. But to know whether these are anomalies or not, I need to know how long I normally spend at the bus stop and on the bus:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Add some new columns
</span><span class="n">df</span><span class="p">[</span><span class="s">'time_at_bus_stop'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'bus_time'</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s">'leave'</span><span class="p">]</span>
<span class="c1"># Convert timedelta to something I can plot
</span><span class="n">df</span><span class="p">[</span><span class="s">'time_at_bus_stop'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'time_at_bus_stop'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">':'</span><span class="p">)</span><span class="o">.</span><span class="nb">str</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s">'time_on_bus'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'leave_bus'</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s">'bus_time'</span><span class="p">]</span>
<span class="c1"># Convert timedelta to something I can plot
</span><span class="n">df</span><span class="p">[</span><span class="s">'time_on_bus'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'time_on_bus'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="nb">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">':'</span><span class="p">)</span><span class="o">.</span><span class="nb">str</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">'going_to'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'time_at_bus_stop'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">a</span><span class="p">],</span>
            <span class="n">fliersize</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">'going_to'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'time_at_bus_stop'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">a</span><span class="p">],</span>
              <span class="n">jitter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'Time at the bus stop'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">''</span><span class="p">)</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">'going_to'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'time_on_bus'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">a</span><span class="p">],</span>
            <span class="n">fliersize</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">'going_to'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'time_on_bus'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">[</span><span class="n">a</span><span class="p">],</span>
              <span class="n">jitter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">'Time on the bus'</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">''</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/images/2018-07-25.commute_analysis_files/2018-07-25.commute_analysis_16_1.png" alt="png" /></p>

<p>Ah, so spending more than 10 minutes at the bus stop stop on my way to work is in the top quartile, as is spending more 20 minutes on the bus. Note, when I say “at the bus stop” I really mean “in transit to and at the bus stop”. That’s why it looks like I wait so much longer for the bus going home - part of it is that I am indeed worse at planning my evening commute, but a bigger part is that I have a 10 minute walk to the bus stop from work, no matter which bus I take home (vs. on the way to work, where the 64 is 2 minutes away from my house).</p>

<p>But anyway, it looks like the reason my very long commutes were very long was that <em>both</em> the wait for the bus <em>and</em> the time spent on the bus were longer than usual - there wasn’t necessarily some catastrophic traffic where I was stuck for over an hour or something.</p>

<p>Something else that’s surprising from these plots is that it looks like I spend about as much time on the bus at night than in the morning - I thought my evening bus rides were usually much shorter than my morning ones - especially when I leave late at night, I basically get on the bus and zoom home. Let’s see!</p>

<p>Here, I’ll plot the time of the bus vs. the time I spend on it.</p>

<p><em>Coding note: Trying a couple of intuitive plotting methods kept giving me errors, and it seems that making a <strong>scatter</strong> plot with some sort of DateTime object on the x-axis isn’t super straightforward (e.g. seems to be an <a href="https://github.com/pandas-dev/pandas/issues/18755">open issue</a> in pandas plotting). <a href="https://stackoverflow.com/questions/27472548/pandas-scatter-plotting-datetime">This stackoverflow post</a> recommends a couple of workarounds, which I’ll try one of!</em></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s">'line'</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">'bus_time'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'time_on_bus'</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="s">'.'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">37</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Bus arrival time'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Minutes spent on bus'</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/images/2018-07-25.commute_analysis_files/2018-07-25.commute_analysis_18_1.png" alt="png" /></p>

<p><em>Coding note: <code class="language-plaintext highlighter-rouge">plt.scatter(df['bus_time'].astype(np.int64), df['time_on_bus'])</code> also works, but has less-nicely formatted x-ticks.</em></p>

<p>Eh, maybe - it looks like leaving after 7 pm consistently leads to a short bus ride, but the floor is pretty much the same between morning and night. Interestingly, leaving later in the morning leads to a much shorter bus ride! It’s actually not that interesting - anyone who lives in Boston/Cambridge/a city knows that traffic is way worse during rush hour, and I already knew this from experience. But at least now I have data to support my habit of working from home in the mornings! XD</p>

<h1 id="bus-delays">Bus delays</h1>

<p>Ok, next question to assuage the haters: how reliable is the bus, and how often is it late? Here we’ll also split up our analyses to try to answer the question about which bus is better, even though I already know the answer: it’s the 64. This is also going to be obvious from the data because I really only take the 70 when I have to! I’m pretty sure it takes just as long, but is a bigger risk because I have to walk from farther to catch it. Let’s see if my hunches are correct.</p>

<p>First, we’ll calculate the delay using the <code class="language-plaintext highlighter-rouge">datetime</code> module.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">calculate_delay</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="n">delay</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s">'bus_time'</span><span class="p">]</span> <span class="o">-</span> <span class="n">row</span><span class="p">[</span><span class="s">'open_mbta_said'</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">notnull</span><span class="p">(</span><span class="n">delay</span><span class="p">):</span>
        <span class="n">delay</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
        <span class="n">delay</span> <span class="o">=</span> <span class="n">delay</span><span class="o">/</span><span class="mf">60.0</span>

    <span class="k">return</span> <span class="n">delay</span>

<span class="n">df</span><span class="p">[</span><span class="s">'bus_delay'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">calculate_delay</span><span class="p">(</span><span class="n">row</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s">'bus_time'</span><span class="p">,</span> <span class="s">'open_mbta_said'</span><span class="p">,</span> <span class="s">'bus_delay'</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div></div>

<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>bus_time</th>
      <th>open_mbta_said</th>
      <th>bus_delay</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2018-09-03 10:43:00</td>
      <td>NaT</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2018-09-03 22:10:00</td>
      <td>NaT</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2018-09-03 20:10:00</td>
      <td>NaT</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2018-09-03 08:03:00</td>
      <td>2018-09-03 08:07:00</td>
      <td>-4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaT</td>
      <td>NaT</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaT</td>
      <td>NaT</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>6</th>
      <td>2018-09-03 10:29:00</td>
      <td>NaT</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2018-09-03 18:07:00</td>
      <td>NaT</td>
      <td>NaT</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2018-09-03 08:15:00</td>
      <td>2018-09-03 08:16:00</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>10</th>
      <td>NaT</td>
      <td>NaT</td>
      <td>NaT</td>
    </tr>
  </tbody>
</table>
</div>

<p>Hm, I guess I was pretty bad at keeping track of what my app said at the beginning of this experiment! Anyway, now we have a column with negative values when the bus was early and positive values when it was late. Drum roll please…</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">keep_buses</span> <span class="o">=</span> <span class="p">[</span><span class="mi">64</span><span class="p">,</span> <span class="mi">70</span><span class="p">]</span>
<span class="n">delay</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span>
         <span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'bus_number'</span><span class="p">,</span> <span class="s">'bus_delay'</span><span class="p">])</span>
         <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'bus_number == @keep_buses'</span><span class="p">)</span>
         <span class="p">)</span>
<span class="n">delay</span><span class="p">[</span><span class="s">'bus_delay'</span><span class="p">]</span> <span class="o">=</span> <span class="n">delay</span><span class="p">[</span><span class="s">'bus_delay'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">'bus_number'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'bus_delay'</span><span class="p">,</span>
            <span class="n">fliersize</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s">'bus_number'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'bus_delay'</span><span class="p">,</span>
              <span class="n">jitter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'gray'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Bus number'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Minutes delay'</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/images/2018-07-25.commute_analysis_files/2018-07-25.commute_analysis_24_1.png" alt="png" /></p>

<p>Oh nooo! It looks like (1) the 70 <em>might</em> be more reliable than the 64 and that (2) the 64 is more often late than not!</p>

<p>Okay wait actually - it’s okay if the 64 is more often late than early, given that I usually scramble out of my house 2 minutes before the app says it is due (this is, in fact, literal and not an exaggeration - I have gotten very good at jaywalking across Cambridge St). So a couple of minutes delay is great, since it means I can continue to not have my shit together and I won’t miss my favorite bus! In fact, the more worrying thing is how often the 70 is <em>early</em> - given that I have to walk there. The walk is definitely more than 5 minutes (I’ve tried), but in my mind feels like it <em>should</em> be less than 10 (it probably isn’t).</p>

<p>Either way, all of these differences are matters of minutes - it doesn’t matter that much in the grand scheme of things, and definitely won’t motivate me to tweak my habits by mere minutes.</p>

<p>Alright, now that I’ve interpreted the data, let’s do some stats! (This is sort of a tongue-in-cheek comment, but also not: if you can’t interpret your data without the stats, then the patterns are probably not significant enough to be meangingful, even if they are statistically significant).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">p</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">ttest_1samp</span><span class="p">(</span>
    <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'bus_number == 64'</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'bus_delay'</span><span class="p">])[</span><span class="s">'bus_delay'</span><span class="p">],</span>
    <span class="n">popmean</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'bus_number == 64'</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'bus_delay'</span><span class="p">])[</span><span class="s">'bus_delay'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">'The two-sided t-test for the hypothesis that the 64 </span><span class="se">\n</span><span class="s">'</span>
      <span class="s">'bus has no delay has a pvalue of {:.2g} (mean delay = {} min).'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">m</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The two-sided t-test for the hypothesis that the 64
bus has no delay has a pvalue of 2.9e-08 (mean delay = 2.15 min).
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">p</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">ttest_1samp</span><span class="p">(</span>
    <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'bus_number == 70'</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'bus_delay'</span><span class="p">])[</span><span class="s">'bus_delay'</span><span class="p">],</span>
    <span class="n">popmean</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'bus_number == 70'</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'bus_delay'</span><span class="p">])[</span><span class="s">'bus_delay'</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">'The two-sided t-test for the hypothesis that the 70 </span><span class="se">\n</span><span class="s">'</span>
      <span class="s">'bus has no delay has a pvalue of {:.2g} (mean delay = {:.2f} min).'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">m</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The two-sided t-test for the hypothesis that the 64
bus has no delay has a pvalue of 0.8 (mean delay = -0.13 min).
</code></pre></div></div>

<p>So there it is: the buses are pretty darn good at being on time, if you’re willing to allow for 5 minutes of wiggle room (which, considering Boston traffic, you absolutely should). Of course, as in all analyses, there are non-data factors to consider in interpreting these results. For example, most of the times when I take the 70, I’m going home and taking it from the first stop on its route. In these cases, it’s almost always <em>exactly</em> on time - the driver is starting their new route, and the bus is often waiting for exactly the time to get going. There are many other factors that contribute to my favorable experience with these buses: I have a relatively short commute, I am very flexible on the time I actually get to work and therefore suffer few to no consequences when the bus is late, I live ridiculously close to my bus stop and so am super flexible on when I leave, my bus serves the Cambridge/Kendall area and so is likely more well-supported and/or less-overcrowded than other bus lines that serve farther or more working-class neighborhoods, etc etc.</p>

<h1 id="bonus-question-9-am-meetings">Bonus question: 9 am meetings?</h1>

<p>Before I finish this post, maybe I can use this data to answer an important question that I have: what time do I need to leave my house in order to be on time to 9 am meetings? I really like to schedule breakfast meetings, but often find that the extra traffic combined with my lack of experience with leaving early means that I’m either leaving super early or scrambling to apologize for a 10-minute delay.</p>

<p>What time should I plan to take the bus if I want to be on campus by 9 am? And should I be rescheduling my meetings by 10-15 minutes to give myself substantially more time (20-30 minutes) to sleep in the mornings?</p>

<p>Unfortunately, I’m no longer at the airport with free Wi-Fi and am going to have to do some hacky things to get this question answered. (I should really invest a little bit of time to learn more about datetime data so I’m not so lost each time…) We’ll use that other trick from above here.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># This is a super hacky way to get the equivalent time stamp for 9 am...
# But I'm on the airplane and want to finish this so it'll have to do!
# If I ever re-run this on a different day, I'll need to update this datetime
# to have the current date (pandas converts all date columns that only contain
# a time into a column with today's date and the provided time...)
</span>
<span class="c1"># 7:30 am
</span><span class="k">print</span><span class="p">(</span><span class="s">'7:30 am = {}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">))]</span>
        <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
      <span class="p">)</span>
<span class="c1"># 9:00 am
</span><span class="k">print</span><span class="p">(</span><span class="s">'9:00 am = {}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))]</span>
        <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
      <span class="p">)</span>
<span class="c1"># 9:15 am
</span><span class="k">print</span><span class="p">(</span><span class="s">'9:15 am = {}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">))]</span>
        <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
      <span class="p">)</span>
<span class="c1"># 9:30 am
</span><span class="k">print</span><span class="p">(</span><span class="s">'9:30 am = {}'</span><span class="o">.</span><span class="nb">format</span><span class="p">(</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">))]</span>
        <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
      <span class="p">)</span>

</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>7:30 am = 1535959800000000000
9:00 am = 1535965200000000000
9:15 am = 1535966100000000000
9:30 am = 1535967000000000000
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">seven30_am</span> <span class="o">=</span> <span class="mi">1535959800000000000</span>
<span class="n">nine_am</span> <span class="o">=</span> <span class="mi">1535965200000000000</span>
<span class="n">nine15_am</span> <span class="o">=</span> <span class="mi">1535966100000000000</span>
<span class="n">nine30_am</span> <span class="o">=</span> <span class="mi">1535967000000000000</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s">'leave_int'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'leave'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s">'arrive_int'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'arrive'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="p">(</span><span class="n">df</span>
    <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'bus_number == 64'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'leave'</span><span class="p">,</span> <span class="s">'arrive'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'leave_int'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'arrive_int'</span><span class="p">,</span>
          <span class="n">kind</span><span class="o">=</span><span class="s">'line'</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s">'.'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
          <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">seven30_am</span><span class="p">,</span> <span class="n">nine30_am</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">seven30_am</span><span class="p">,</span> <span class="n">nine30_am</span><span class="p">)</span>

<span class="c1"># Mark 9 am arrival
</span><span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">nine_am</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'gray'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">set_time_ticks</span><span class="p">(</span><span class="n">ax</span><span class="p">):</span>
    <span class="c1"># Manually set the ticks to half-hour increments
</span>    <span class="n">times</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
             <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
             <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
             <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
             <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
    <span class="c1"># Again, get it into a pandas dataframe to then apply astype(np.int64)
</span>    <span class="n">times</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">times</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'datetime'</span><span class="p">])</span>
    <span class="n">times</span><span class="p">[</span><span class="s">'int_time'</span><span class="p">]</span> <span class="o">=</span> <span class="n">times</span><span class="p">[</span><span class="s">'datetime'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="s">'int_time'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="s">'int_time'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">H:</span><span class="si">%</span><span class="s">M'</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">times</span><span class="p">[</span><span class="s">'datetime'</span><span class="p">]],</span> <span class="n">fontsize</span><span class="o">=</span><span class="s">'large'</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="n">i</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">H:</span><span class="si">%</span><span class="s">M'</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">times</span><span class="p">[</span><span class="s">'datetime'</span><span class="p">]],</span> <span class="n">fontsize</span><span class="o">=</span><span class="s">'large'</span><span class="p">)</span>

<span class="n">set_time_ticks</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Time left home'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s">'large'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Time arrived at work'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s">'large'</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/images/2018-07-25.commute_analysis_files/2018-07-25.commute_analysis_33_1.png" alt="png" /></p>

<p>Yes, that’s what I thought - when I leave my house at 8:30, I sometimes make it before 9 am but sometimes not. Let’s see if we can figure out which <em>bus</em> I should take to get to work before 9 am…</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="p">[</span><span class="s">'bus_time_int'</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">'bus_time'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="p">(</span><span class="n">df</span>
    <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'bus_number == 64'</span><span class="p">)</span>
    <span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'bus_time'</span><span class="p">,</span> <span class="s">'arrive'</span><span class="p">])</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'bus_time_int'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'arrive_int'</span><span class="p">,</span>
          <span class="n">kind</span><span class="o">=</span><span class="s">'line'</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s">'.'</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
          <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">seven30_am</span><span class="p">,</span> <span class="n">nine30_am</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">seven30_am</span><span class="p">,</span> <span class="n">nine30_am</span><span class="p">)</span>

<span class="c1"># Mark 9 am arrivale
</span><span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">nine_am</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'gray'</span><span class="p">)</span>
<span class="c1"># And 9:15
</span><span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">nine15_am</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'darkgreen'</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">set_time_ticks</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Bus time'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s">'large'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Time arrived at work'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s">'large'</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/images/2018-07-25.commute_analysis_files/2018-07-25.commute_analysis_35_1.png" alt="png" /></p>

<p>Hm, it looks like there isn’t a clear pattern here either - the 8:30 bus is just too uncertain! But I think I have an answer to my second question: if I schedule my breakfast meetings for 9:15 am, I will <em>definitely</em> make it on time if I take the 8:30 bus. Good to know!</p>

<h1 id="conclusion">Conclusion</h1>

<p>Much like my <a href="/posts/2018/06/hinge-experiment">previous post</a> about online dating, I didn’t learn too much from this analysis that I didn’t already know. In this case, I already knew it because I paid attention when I logged my commute every day.</p>

<p>That said, looking at all the data together and seeing how much shorter biking is than taking the bus is pretty motivating - I should really get around to figuring out my basket/panier situation, so that I can bike as often as frisbee injuries and the weather allows!
I’ll also make sure to schedule any important 9 am meetings to 9:15 am, which will allow me to take the 8:30 am bus without worrying too much about it making me late.</p>

<p>In conclusion, living in Allston is awesome because I am in a house full of my friends, a neighborhood full of actual real people, and a backyard that lets us have three chickens. If that means that my commute to work is 30 minutes instead of 15, then so be it!</p>

        
      </section>

      <footer class="page__meta">
        
        


  




  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="http://localhost:4000/tags/#coding" class="page__taxonomy-item" rel="tag">coding</a><span class="sep">, </span>
    
      
      
      <a href="http://localhost:4000/tags/#data-science" class="page__taxonomy-item" rel="tag">data-science</a><span class="sep">, </span>
    
      
      
      <a href="http://localhost:4000/tags/#portfolio" class="page__taxonomy-item" rel="tag">portfolio</a>
    
    </span>
  </p>




      </footer>

      

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/posts/2018/09/commute" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/posts/2018/09/commute" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=http://localhost:4000/posts/2018/09/commute" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/posts/2018/09/commute" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


  <nav class="pagination">
    
      <a href="http://localhost:4000/posts/2018/06/hinge-experiment" class="pagination--pager" title="Hinge online dating experiment
">Previous</a>
    
    
      <a href="http://localhost:4000/posts/2018/09/64-bus" class="pagination--pager" title="The 64 bus
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      
        <h4 class="page__related-title">You May Also Enjoy</h4>
      
      <div class="grid__wrapper">
        
          





<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    

    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/posts/2021/01/public-health-resources" rel="permalink">Resources for pivoting to public health data science
</a>
      
    </h2>

<!--Uncomment out this section to have the read time re-included
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  10 minute read
	
</p>
    
-->
        
         <p class="page__date"><!--<strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i>Published:</strong> --> <i><time datetime="2021-01-09T00:00:00-08:00">January 09, 2021</time></i></p>
        

    <!--The part below defines the "Read more" behavior-->
    <!--TODO: figure out how the excerpts are defined-->
    
    <p class="archive__item-excerpt" itemprop="description"><p>About two years into my PhD, I realized that the field I actually wanted to be in was public health, not necessarily biological engineering. Around the same time, I also fell in love with coding and data science. That’s when I realized that combining public health and data science could be an ideal career path for my technical abilities and interests and my desire to have social impact. But immersed in the world of academia, at an institution without a school of public health, and with mentors who had all chosen routes in biotech or academia, it was really hard to learn more about my options for pivoting to a career in public health.

<strong><a href="http://localhost:4000/posts/2021/01/public-health-resources" rel="permalink"> ... Read more</a></strong></p></p>
    

    

  </article>
</div>

        
          





<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    

    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/posts/2020/06/racism-public-health-wbe" rel="permalink">Racism as a public health crisis: how wastewater epidemiology fits in
</a>
      
    </h2>

<!--Uncomment out this section to have the read time re-included
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  10 minute read
	
</p>
    
-->
        
         <p class="page__date"><!--<strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i>Published:</strong> --> <i><time datetime="2020-06-10T00:00:00-07:00">June 10, 2020</time></i></p>
        

    <!--The part below defines the "Read more" behavior-->
    <!--TODO: figure out how the excerpts are defined-->
    
    <p class="archive__item-excerpt" itemprop="description"><p>Today is the <a href="https://www.particlesforjustice.org/">Strike for Black Lives</a> and a day to <a href="https://www.shutdownstem.com/">#ShutDownSTEM</a>. For white people like me, today is about recognizing and reflecting on the anti-Black racism in our society, and committing to specific actions toward ending white supremacy. One of my actions for today is to publicly reflect on how our work at <a href="www.biobot.io">Biobot Analytics</a> contributes to addressing – and potentially perpetuating – racism in public health.

<strong><a href="http://localhost:4000/posts/2020/06/racism-public-health-wbe" rel="permalink"> ... Read more</a></strong></p></p>
    

    

  </article>
</div>

        
          





<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    

    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/posts/2020/02/road-trip-map" rel="permalink">Mapping my cross-country road trip with Python
</a>
      
    </h2>

<!--Uncomment out this section to have the read time re-included
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  27 minute read
	
</p>
    
-->
        
         <p class="page__date"><!--<strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i>Published:</strong> --> <i><time datetime="2020-02-09T00:00:00-08:00">February 09, 2020</time></i></p>
        

    <!--The part below defines the "Read more" behavior-->
    <!--TODO: figure out how the excerpts are defined-->
    
    <p class="archive__item-excerpt" itemprop="description"><p>When I was on my <a href="https://cduvallet.github.io/travel/">cross-country road trip</a> last year, I kept track of a lot of things in the hopes of doing amazing analyses when I got back. Turns out having a job as a data scientist makes it a lot harder to find time to do data science on the side, and so I’ve only really gotten a chance to look into my <a href="2019/07/road-trip-expenses-pt1">expenses</a>. One of the things I had really wanted to do was make a map of all the places I went, but I didn’t actually know how to work with geospatial data in Python yet. I had this grand idea that I’d learn spatial data techniques while on my trip, but turns out hiking, drinking beer while watching the sunset, and going to bed early were way more compelling ways to spend my time. Luckily for me, one of the most fun parts of my new job has been learning geospatial coding and plotting techniques. I’ve been having fun with it in my job, and I realized that it also means I get to finally make my map!

<strong><a href="http://localhost:4000/posts/2020/02/road-trip-map" rel="permalink"> ... Read more</a></strong></p></p>
    

    

  </article>
</div>

        
          





<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    

    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="http://localhost:4000/posts/2020/01/phd-job-search" rel="permalink">A Well-Kept Secret for Finding a Job post-PhD
</a>
      
    </h2>

<!--Uncomment out this section to have the read time re-included
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  
	  8 minute read
	
</p>
    
-->
        
         <p class="page__date"><!--<strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i>Published:</strong> --> <i><time datetime="2020-01-25T00:00:00-08:00">January 25, 2020</time></i></p>
        

    <!--The part below defines the "Read more" behavior-->
    <!--TODO: figure out how the excerpts are defined-->
    
    <p class="archive__item-excerpt" itemprop="description"><p>During my PhD, I performed a lot of exit interviews with graduating students and learned that finding a job is often the most stressful part of graduating, and among the most stressful in the entire PhD. After my own defense, however, I was able to avoid some of that stress by discovering a valuable post-PhD job option that I had rarely heard discussed: getting a part-time or consulting gig after graduating to hold you over while you figure out your next full-time non-academic career move.

<strong><a href="http://localhost:4000/posts/2020/01/phd-job-search" rel="permalink"> ... Read more</a></strong></p></p>
    

    

  </article>
</div>

        
      </div>
    </div>
  
</div>


    </script>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<a href="/sitemap/">Sitemap</a>
<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/dzakwanfalihh"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/dzakwanfalih"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Dzakwan Falih. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="http://localhost:4000/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>

