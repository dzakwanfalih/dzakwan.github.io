

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Dzakwan Falih</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Dzakwan Falih">
<meta property="og:title" content="Dzakwan Falih">


  <link rel="canonical" href="http://localhost:4000/wordpress/posts/20170621-scatter-plotting-in-python/">
  <meta property="og:url" content="http://localhost:4000/wordpress/posts/20170621-scatter-plotting-in-python/">





  <meta name="twitter:site" content="@dzakwanfalihh">
  <meta name="twitter:title" content="Dzakwan Falih">
  <meta name="twitter:description" content="Dzakwan Falih">
  <meta name="twitter:url" content="http://localhost:4000/wordpress/posts/20170621-scatter-plotting-in-python/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  












  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Dzakwan Falih",
      "url" : "http://localhost:4000",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Dzakwan Falih Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="http://localhost:4000/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="http://localhost:4000/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="http://localhost:4000/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="http://localhost:4000/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="http://localhost:4000/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="http://localhost:4000/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="http://localhost:4000/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="http://localhost:4000/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="http://localhost:4000/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="http://localhost:4000/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="http://localhost:4000/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="http://localhost:4000/assets/css/academicons.css"/>
<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/">Dzakwan Falih</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/blog/">Blog</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/publications/">Publications</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/cv/">CV</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/travel/">Road trip</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="http://localhost:4000/images/gue.jpg" class="author__avatar" alt="Dzakwan Falih">
    
  </div>

  <div class="author__content">
    <h3 class="author__name"><a href="/">Dzakwan Falih</a></h3>
    <p class="author__bio">reformed cyber criminal at cyber space</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Cyber Space, Internet</li>
      
      
      
      
        <li><a href="https://keybase.io/dzakwanfalih"><i class="fa fa-fw fa-key" aria-hidden="true"></i> Keybase</a></li>
      
      
        <li><a href="https://twitter.com/dzakwanfalihh"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/dzakwanfalih"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
        <li><a href="https://instagram.com/dzakwanfalih_2.0"><i class="fa fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
      
      
      
      
      
      
      
      
      
      
        <li><a href="https://www.youtube.com/user/https://www.youtube.com/channel/UC10hFGJIgyBmDCUivyDJptg/videos"><i class="fa fa-fw fa-youtube-square" aria-hidden="true"></i> YouTube</a></li>
      
      
      
      
      
      
      
        <li><a href="https://scholar.google.com/citations?hl=en&user=ZFuwjiIAAAAJ"><i class="ai ai-google-scholar-square ai-fw"></i> Google Scholar</a></li>
      
      
      
      
      
        <li><a href="mailto:dzakwanfaliht@hotmail.com"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
      

    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          
          
        
        
        
        
             
        
    
        </header>
      

      <section class="page__content" itemprop="text">
        <p>title: Scatter plotting in python
link: https://claireduvallet.wordpress.com/2017/06/21/scatter-plotting-in-python/
author: cduvallet
description: 
post_id: 1131
created: 2017/06/21 03:08:30
created_gmt: 2017/06/21 03:08:30
comment_status: open
post_name: scatter-plotting-in-python
status: publish
post_type: post</p>

<h1 id="scatter-plotting-in-python">Scatter plotting in python</h1>

<p>In the past year or so, I’ve become a full-fledged tidy data convert. I use pandas and seaborn for almost everything that I do, and any time I figure out a new cool groupby trick I feel like I’ve PhD-leveled up. That’s why it’s so frustrating that I still can’t find a good way to plot categorical scatterplots. I want:</p>

<ul>
  <li>an easy way to plot a scatterplot where the points are colored according to an associated categorical variable.</li>
  <li>to be able to manipulate this plot on the Axes object level (so that I can place it wherever I want, and so I can modify parameters after making the plot)</li>
  <li>to be flexible with respect to my categorical variables (i.e. I don’t want to hard-code any of them in, so that the plot is automatically updated if the number/identities of my categories change)</li>
  <li>the code to be elegant and in the spirit of tidy data!</li>
</ul>

<h1 id="seaborn">Seaborn</h1>

<p>As a tidy data convert, my first go-to is almost always seaborn. <a href="http://seaborn.pydata.org/">Seaborn</a> is great and I highly encourage everyone plotting in Python to get used to it. Functions for different types of plots all take basically the same inputs, so it’s trivial to change your barplot into a boxplot and so on. It’s also really easy to slice and dice your data in different ways: you just tell seaborn which column is the x axis, y axis, color, etc. It’s also really nice because you can usually make a nice-looking plot with one line of code! That said, every time I want to plot a scatterplot with points colored according to a categorical variable, I furiously google and <a href="http://stackoverflow.com/questions/26139423/plot-different-color-for-different-categorical-levels-using-matplotlib">StackOverflow</a> and end up with the following options that might be able to do what I want. [code lang=python] import matplotlib.pyplot as plt import pandas as pd import seaborn as sns %matplotlib inline sns.set_style(‘white’) df = sns.load_dataset(‘iris’) df.head() [/code]</p>

<p>sepal_length sepal_width petal_length petal_width species</p>

<p>0
5.1
3.5
1.4
0.2
setosa</p>

<p>1
4.9
3.0
1.4
0.2
setosa</p>

<p>2
4.7
3.2
1.3
0.2
setosa</p>

<p>3
4.6
3.1
1.5
0.2
setosa</p>

<p>4
5.0
3.6
1.4
0.2
setosa</p>

<h2 id="lmplot">lmplot</h2>

<p><code class="language-plaintext highlighter-rouge">lmplot</code> seems like the obvious first choice, since it makes the plot I want. <code class="language-plaintext highlighter-rouge">lmplot</code> is a wrapper around <code class="language-plaintext highlighter-rouge">regplot</code>, which makes a scatter plot of x vs y-variables, and fits a regression to the relationship. When you turn off the regression, it’s just a scatterplot. <code class="language-plaintext highlighter-rouge">lmlplot</code> wraps this functionality into a <code class="language-plaintext highlighter-rouge">FacetGrid</code> so that you can split your data according to a <code class="language-plaintext highlighter-rouge">hue</code> variable (and do the regression on each category separately). However, it makes and returns a new <code class="language-plaintext highlighter-rouge">FacetGrid</code> instance, and it’s unclear to me how to interact with the underlying <code class="language-plaintext highlighter-rouge">Axes</code> object. Also, there isn’t any way to pass an existing <code class="language-plaintext highlighter-rouge">Axes</code> instance to the function, and so I can’t put this plot on an existing figure (e.g. that I made using <code class="language-plaintext highlighter-rouge">plt.subplots()</code> or with GridSpec). I’m forced to have this be its own new stand-alone figure. [code lang=python] sns.lmplot(data=df, x=’sepal_length’, y=’sepal_width’, hue=’species’, fit_reg=False) [/code] <img src="https://claireduvallet.files.wordpress.com/2017/06/scatterplotting-in-matplotlib_4_1.png" alt="Scatterplotting in matplotlib_4_1" /> [code lang=python] fig, ax = plt.subplots() sns.lmplot(data=df, x=’sepal_length’, y=’sepal_width’, hue=’species’, fit_reg=False, ax=ax) [/code] [code lang=text] -————————————————————————– TypeError Traceback (most recent call last) in () 1 fig, ax = plt.subplots() -—&gt; 2 sns.lmplot(data=df, x=’sepal_length’, y=’sepal_width’, hue=’species’, fit_reg=False, ax=ax) TypeError: lmplot() got an unexpected keyword argument ‘ax’ [/code]</p>

<h2 id="pointplot">pointplot</h2>

<p>This is another option I always forget about until I’m well into the rabbit hole (surprisingly, it doesn’t come up often in my google searches). That said, maybe the reason it doesn’t come up is that it actually doesn’t do what I want. I’m not sure how to use this function to plot the individual points. This plotting function aggregates the points in each category with an estimator, and the <a href="http://seaborn.pydata.org/generated/seaborn.pointplot.html">documentation</a> even makes this explicit:</p>

<blockquote>
  <p>It is important to keep in mind that a point plot shows only the mean (or other estimator) value</p>
</blockquote>

<p>There go all my hopes and dreams… [code lang=python] ax = sns.pointplot(data=df, x=’sepal_length’, y=’sepal_width’, hue=’species’) ax.set_xticklabels(ax.get_xticklabels(), rotation=45) fig.tight_layout() [/code] ![Scatterplotting in matplotlib_7<em>0](https://claireduvallet.files.wordpress.com/2017/06/scatterplotting-in-matplotlib_7_0.png) Another really important caveat with this function is that it treats the x-axis as _categorical</em> values - I’ve been tripped up by this before! This can really mess up your interpretation of the graph, if you’re expecting to look for a relationship between continuous x and y-values. This is <em>definitely</em> not the right kind of plot for this. In the following plot, for example, look at how the x-axis jumps from 0.6 to 1.0. Ruh roh! [code lang=python] ax = sns.pointplot(data=df, x=’petal_width’, y=’sepal_width’, hue=’species’) ax.set_xticklabels(ax.get_xticklabels(), rotation=45) fig.tight_layout() [/code] <img src="https://claireduvallet.files.wordpress.com/2017/06/scatterplotting-in-matplotlib_9_0.png" alt="Scatterplotting in matplotlib_9_0" /></p>

<h2 id="facetgrid">FacetGrid</h2>

<p>Finally, we can go old-school <code class="language-plaintext highlighter-rouge">FacetGrid</code> + <code class="language-plaintext highlighter-rouge">plt.scatter</code> (I don’t know why this registers are “old-school” in my mind but it does). Again, however, this returns a FacetGrid that you can’t easily manipulate or move around. Womp womp. [code lang=python] g = sns.FacetGrid(data=df, hue=’species’) g.map(plt.scatter, ‘sepal_length’, ‘sepal_width’) [/code] <img src="https://claireduvallet.files.wordpress.com/2017/06/scatterplotting-in-matplotlib_11_1.png" alt="Scatterplotting in matplotlib_11_1" /> Because seaborn is a statistical plotting package, it tends to focus on making doing fancy things easier (while often times making doing easy things fancier…) This is one of those instances where it’s not totally clear to me how to just plot the raw data.</p>

<h1 id="ggplot">ggplot</h1>

<p>Okay fine maybe seaborn is too fancy to actually do this simple thing. Obviously what I want is to recapitulate R’s ggplot functionality so why not use Python’s own ggplot? Answer: honestly, because it’s a bit too early in its development and I find the lack of documentation frustrating. For example, I can’t seem to find whether you pass in an Axis instance to the ggplot call somewhere to specify where to make the plot. [code lang=python] import ggplot as gg gg.ggplot(df, gg.aes(x=’sepal_length’, y=’sepal_width’, color=’species’)) + gg.geom_point() [/code]</p>

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      

      


    </div>

    
  </article>

  
  
</div>


    </script>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<a href="/sitemap/">Sitemap</a>
<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/dzakwanfalihh"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/dzakwanfalih"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Dzakwan Falih. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>, a fork of <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="http://localhost:4000/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>

